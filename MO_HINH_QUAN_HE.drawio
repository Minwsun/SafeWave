<mxfile host="Electron" modified="2025-11-28T04:11:52.636Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/24.4.0 Chrome/120.0.6099.109 Electron/28.1.0 Safari/537.36" etag="OWh8kxbUEN-YHbu3xoqF" version="24.4.0" type="device">
  <diagram id="RelationalModel" name="1.2. Mô hình Quan hệ (Relational Model)">
    <mxGraphModel dx="1886" dy="918" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="1400" pageHeight="2000" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="r1" value="R1: LOCATIONS" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="40" y="40" width="280" height="200" as="geometry" />
        </mxCell>
        <mxCell id="r1_pk" value="PK location_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontStyle=1;fillColor=#fff2cc;" parent="r1" vertex="1">
          <mxGeometry y="30" width="280" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r1_attrs" value="latitude, longitude, title (NOT NULL)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r1" vertex="1">
          <mxGeometry y="56" width="280" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r1_attrs2" value="subtitle, province, elevation" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r1" vertex="1">
          <mxGeometry y="82" width="280" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r1_time" value="created_at (DEFAULT CURRENT_TIMESTAMP)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r1" vertex="1">
          <mxGeometry y="108" width="280" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r2" value="R2: WEATHER_RECORDS" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="490" y="34" width="320" height="212" as="geometry" />
        </mxCell>
        <mxCell id="r2_pk" value="PK weather_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontStyle=1;fillColor=#fff2cc;" parent="r2" vertex="1">
          <mxGeometry y="30" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r2_fk" value="FK location_id → R1 (NOT NULL, CASCADE)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontStyle=2;fillColor=#ffe6cc;" parent="r2" vertex="1">
          <mxGeometry y="56" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r2_temp" value="temp, feels_like, temp_min, temp_max" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r2" vertex="1">
          <mxGeometry y="82" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r2_pressure" value="humidity, pressure_sea, pressure_ground" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r2" vertex="1">
          <mxGeometry y="108" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r2_wind" value="wind_speed, wind_dir, wind_gusts" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r2" vertex="1">
          <mxGeometry y="134" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r2_other" value="cloud_cover, uv_index, soil_moisture" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r2" vertex="1">
          <mxGeometry y="160" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r2_time" value="recorded_at (DEFAULT CURRENT_TIMESTAMP)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r2" vertex="1">
          <mxGeometry y="186" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r3" value="R3: RAIN_STATS" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="890" y="40" width="280" height="134" as="geometry" />
        </mxCell>
        <mxCell id="r3_pk" value="PK rain_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontStyle=1;fillColor=#fff2cc;" parent="r3" vertex="1">
          <mxGeometry y="30" width="280" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r3_fk" value="FK weather_id → R2 (NOT NULL, CASCADE)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontStyle=2;fillColor=#ffe6cc;" parent="r3" vertex="1">
          <mxGeometry y="56" width="280" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r3_h" value="h1, h2, h3, h5, h12, h24 (DEFAULT 0)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r3" vertex="1">
          <mxGeometry y="82" width="280" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r3_d" value="d3, d7, d14 (DEFAULT 0)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r3" vertex="1">
          <mxGeometry y="108" width="280" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r4" value="R4: RISK_ANALYSES" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="40" y="370" width="320" height="186" as="geometry" />
        </mxCell>
        <mxCell id="r4_pk" value="PK analysis_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontStyle=1;fillColor=#fff2cc;" parent="r4" vertex="1">
          <mxGeometry y="30" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r4_fk1" value="FK location_id → R1 (NOT NULL, CASCADE)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontStyle=2;fillColor=#ffe6cc;" parent="r4" vertex="1">
          <mxGeometry y="56" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r4_fk2" value="FK weather_id → R2 (nullable, SET NULL)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontStyle=2;fillColor=#ffe6cc;" parent="r4" vertex="1">
          <mxGeometry y="82" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r4_level" value="level, label (NOT NULL), score, confidence" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r4" vertex="1">
          <mxGeometry y="108" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r4_actions" value="actions, terrain_type, soil_type" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r4" vertex="1">
          <mxGeometry y="134" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r4_sat" value="saturation, analyzed_at" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r4" vertex="1">
          <mxGeometry y="160" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r6" value="R6: ANALYSIS_HISTORY" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="40" y="640" width="320" height="180" as="geometry" />
        </mxCell>
        <mxCell id="r6_pk" value="PK history_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontStyle=1;fillColor=#fff2cc;" parent="r6" vertex="1">
          <mxGeometry y="30" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r6_fk1" value="FK location_id → R1 (nullable, SET NULL)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontStyle=2;fillColor=#ffe6cc;" parent="r6" vertex="1">
          <mxGeometry y="56" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r6_fk2" value="FK analysis_id → R4 (nullable, SET NULL)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontStyle=2;fillColor=#ffe6cc;" parent="r6" vertex="1">
          <mxGeometry y="82" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r6_data" value="risk_level (NOT NULL), risk_type" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r6" vertex="1">
          <mxGeometry y="108" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r6_fav" value="is_favorite (DEFAULT 0), created_at" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r6" vertex="1">
          <mxGeometry y="134" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r7" value="R7: ALERTS" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="570" y="610" width="320" height="212" as="geometry" />
        </mxCell>
        <mxCell id="r7_pk" value="PK alert_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontStyle=1;fillColor=#fff2cc;" parent="r7" vertex="1">
          <mxGeometry y="30" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r7_note" value="(Độc lập - không có FK)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontStyle=3;fillColor=#e1d5e7;" parent="r7" vertex="1">
          <mxGeometry y="56" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r7_data1" value="external_id, location_name (NOT NULL), province" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r7" vertex="1">
          <mxGeometry y="82" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r7_data2" value="level, type (NOT NULL), latitude, longitude (NOT NULL)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r7" vertex="1">
          <mxGeometry y="108" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r7_data3" value="rain_amount, wind_speed (DEFAULT 0)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r7" vertex="1">
          <mxGeometry y="134" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r7_data4" value="description, source, is_cluster (DEFAULT 0)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r7" vertex="1">
          <mxGeometry y="160" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r7_time" value="cluster_count (DEFAULT 1), detected_at, expires_at" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r7" vertex="1">
          <mxGeometry y="186" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r8" value="R8: PROVINCE_RAIN_HISTORY" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="980" y="246" width="320" height="160" as="geometry" />
        </mxCell>
        <mxCell id="r8_pk" value="PK entry_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontStyle=1;fillColor=#fff2cc;" parent="r8" vertex="1">
          <mxGeometry y="30" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r8_note" value="(Độc lập - tổng hợp theo tỉnh)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontStyle=3;fillColor=#e1d5e7;" parent="r8" vertex="1">
          <mxGeometry y="56" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r8_data" value="province (NOT NULL), h1, h3, h24 (DEFAULT 0)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r8" vertex="1">
          <mxGeometry y="82" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r8_data2" value="d3, d7, d14 (DEFAULT 0)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r8" vertex="1">
          <mxGeometry y="108" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r8_other" value="location_note, source, recorded_at" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r8" vertex="1">
          <mxGeometry y="134" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r9" value="R9: SHELTERS" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1070" y="570" width="320" height="186" as="geometry" />
        </mxCell>
        <mxCell id="r9_pk" value="PK shelter_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontStyle=1;fillColor=#fff2cc;" parent="r9" vertex="1">
          <mxGeometry y="30" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r9_note" value="(Độc lập - dữ liệu tĩnh)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontStyle=3;fillColor=#e1d5e7;" parent="r9" vertex="1">
          <mxGeometry y="56" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r9_data1" value="name, province (NOT NULL), address" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r9" vertex="1">
          <mxGeometry y="82" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r9_data2" value="latitude, longitude (NOT NULL), capacity" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r9" vertex="1">
          <mxGeometry y="108" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r9_data3" value="contact, status (DEFAULT &#39;Available&#39;)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r9" vertex="1">
          <mxGeometry y="134" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r9_time" value="updated_at (DEFAULT CURRENT_TIMESTAMP)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r9" vertex="1">
          <mxGeometry y="160" width="320" height="26" as="geometry" />
        </mxCell>
        <mxCell id="fk1" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=3;endArrow=ERmany;endFill=0;strokeColor=#82b366;" parent="1" source="r1" target="r2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fk2" value="1:1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=3;endArrow=ERone;endFill=0;strokeColor=#d6b656;" parent="1" source="r2" target="r3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fk3" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=3;endArrow=ERmany;endFill=0;strokeColor=#b85450;" parent="1" source="r1" target="r4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fk4" value="N:1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=3;endArrow=ERone;endFill=0;strokeColor=#b85450;dashed=1;" parent="1" source="r4" target="r2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fk5" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=3;endArrow=ERmany;endFill=0;strokeColor=#9673a6;" parent="1" source="r4" target="r5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fk6" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=3;endArrow=ERmany;endFill=0;strokeColor=#d79b00;dashed=1;" parent="1" source="r5" target="r6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fk7" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=3;endArrow=ERmany;endFill=0;strokeColor=#d79b00;dashed=1;" parent="1" source="r4" target="r6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fk7_label" value="SET NULL" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fillColor=#fff2cc;" parent="fk7" vertex="1" connectable="0">
          <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
            <mxPoint x="20" y="-10" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="legend" value="CHÚ THÍCH" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="40" y="900" width="1120" height="120" as="geometry" />
        </mxCell>
        <mxCell id="legend_pk" value="PK = Primary Key (Khóa chính) - Màu vàng" style="text;strokeColor=none;fillColor=#fff2cc;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontStyle=1;" parent="legend" vertex="1">
          <mxGeometry y="30" width="1120" height="26" as="geometry" />
        </mxCell>
        <mxCell id="legend_fk" value="FK = Foreign Key (Khóa ngoại) - Màu cam" style="text;strokeColor=none;fillColor=#ffe6cc;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontStyle=1;" parent="legend" vertex="1">
          <mxGeometry y="56" width="1120" height="26" as="geometry" />
        </mxCell>
        <mxCell id="legend_cascade" value="CASCADE = Xóa cha → Xóa con | SET NULL = Xóa cha → FK = NULL | Đường nét đứt = nullable" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="legend" vertex="1">
          <mxGeometry y="82" width="1120" height="26" as="geometry" />
        </mxCell>
        <mxCell id="JKYw5czVYfzXxmlQqObd-1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=3;endArrow=ERmany;endFill=0;strokeColor=#d79b00;dashed=1;" edge="1" parent="1" source="r1" target="r5">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="180" y="240" as="sourcePoint" />
            <mxPoint x="200" y="640" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JKYw5czVYfzXxmlQqObd-2" value="SET NULL" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fillColor=#fff2cc;" vertex="1" connectable="0" parent="JKYw5czVYfzXxmlQqObd-1">
          <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
            <mxPoint x="20" y="-10" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="r5" value="R5: RISK_REASONS" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="580" y="340" width="280" height="108" as="geometry" />
        </mxCell>
        <mxCell id="r5_pk" value="PK reason_id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontStyle=1;fillColor=#fff2cc;" parent="r5" vertex="1">
          <mxGeometry y="30" width="280" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r5_fk" value="FK analysis_id → R4 (NOT NULL, CASCADE)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontStyle=2;fillColor=#ffe6cc;" parent="r5" vertex="1">
          <mxGeometry y="56" width="280" height="26" as="geometry" />
        </mxCell>
        <mxCell id="r5_data" value="code (NOT NULL), score, description, source" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="r5" vertex="1">
          <mxGeometry y="82" width="280" height="26" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
